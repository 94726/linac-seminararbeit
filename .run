#!/usr/bin/env bash

target="1.2"

# if ! tmux has-session -t $target 2> /dev/null; then
#     tmux neww -dn $target
# fi

function tmux-windowizer {
  shift
  tmux send-keys -t 1.2 "$*" Enter
}


rsync -aP -q --exclude '.*' ./ pi-hwifi:~/seminar &
tmux-windowizer raspi '[[ -z "$SSH_CLIENT" && -z "$SSH_TTY" ]] && ssh pi-hwifi'
# tmux-windowizer raspi mkdir -p ~/seminar

# # filename="./linac.py"
# contents=$(cat $filename)

tmux-windowizer raspi "clear"
tmux-windowizer raspi cd ~/seminar

# tmux-windowizer raspi
# # tmux-windowizer raspi "cat <<EOF > $filename"
# # tmux-windowizer raspi "$contents"
# # tmux-windowizer raspi "EOF"
# # tmux-windowizer raspi "clear"

# tmux-windowizer raspi "python3 $filename"
# tmux-windowizer raspi 'eval $(pdm venv activate)'
# tmux-windowizer raspi 'pdm dev'
# tmux-windowizer raspi "fastapi dev --host 0.0.0.0"

